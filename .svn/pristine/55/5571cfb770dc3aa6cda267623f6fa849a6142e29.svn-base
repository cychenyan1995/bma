{"version":3,"sources":["src/pages/salesHistory/components/Form.js","src/pages/salesHistory/components/Table.js","src/pages/salesHistory/index.js"],"names":["_react","_interopRequireWildcard","__webpack_require__","_index","Option","_select","default","FormCustom","connect","_ref","historyForm","Component","constructor","props","super","this","handleSubmit","e","preventDefault","_this$props","form","validateFieldsAndScroll","err","values","handleReset","resetFields","filter","inputValue","path","some","option","label","toLowerCase","indexOf","dispatch","type","payload","render","_this$props2","getFieldDecorator","areaOptions","leaderOptions","createElement","_form","className","onSubmit","_row","gutter","_col","span","Item","rules","_input","placeholder","showSearch","filterOption","input","children","undefined","map","item","value","regionalManagerLeader","key","area","style","textAlign","_button","htmlType","marginLeft","onClick","create","_dva","_moment","_interopRequireDefault","_Table","_Form","HistoryTable","historyTable","onChange","page","pageSize","filters","currentPage","onShowSizeChange","current","size","onVisibleChange","visible","closed","console","log","param","_this$props3","month","handleConfirmSubmit","rule","callback","toDetail","text","onChangeMonth","date","dateString","_this$props4","exportByMonth","_this$props5","_notification2","open","message","description","duration","_this$props6","columns","title","width","dataIndex","fixed","record","bind","spCode","MonthPicker","_datePicker","monthFormat","_card","dataSource","list","total","scroll","x","y","searchForm","searchRight","defaultValue","format","icon","_Detail","_PageHeaderWrapper","_Select2","SalesHistory","history","showDetail","goBack","handleSelectChange","taskType","view","data","chartData","onchange","lineData","barData1","barData2","xAxisData"],"mappings":"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","file":"9.async.js","sourcesContent":["import React, {Component} from 'react';\nimport {Row, Col, Button, Form, Input, Select} from 'antd';\nimport { connect } from 'dva/index';\n\nconst Option = Select.Option;\n\n@connect(({historyForm}) => ({\n  historyForm\n}))\nclass FormCustom extends Component {\n\n  constructor(props) {\n    super(props);\n    const {dispatch} = props;\n    dispatch({\n      type: 'historyForm/fetchAreaOptions',\n      payload: {},\n    });\n    dispatch({\n      type: 'historyForm/fetchLeaderOptions',\n      payload: {},\n    });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const {form,handleSubmit} = this.props;\n    form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        handleSubmit(values);\n      }\n    });\n  }\n\n  handleReset = () => {\n    const {form} = this.props;\n    form.resetFields();\n  }\n\n  filter = (inputValue, path) => (\n    path.some(option => (option.label).toLowerCase().indexOf(inputValue.toLowerCase()) > -1)\n  );\n\n\n  render() {\n    const { form, historyForm, areaOptions, leaderOptions } = this.props;\n    const { getFieldDecorator } = form;\n\n    return (\n      <Form\n        className=\"ant-advanced-search-form\"\n        onSubmit={this.handleSubmit}\n      >\n        <Row gutter={12}>\n          <Col span={12}>\n            <Form.Item label='区域经理'>\n              {getFieldDecorator('regionalManager', {\n                rules: []\n              })(\n                <Input placeholder=\"请输入区域经理\" />\n              )}\n            </Form.Item>\n          </Col>\n          <Col span={12}>\n            <Form.Item label='大区经理'>\n              {getFieldDecorator('regionalManagerLeader', {\n              })(\n                <Select placeholder=\"请选择\" showSearch filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}>\n                  {\n                    (historyForm.leaderOptions === undefined ? []:historyForm.leaderOptions).map((item) => <Option value={item.regionalManagerLeader} key={item.regionalManagerLeader}>{item.regionalManagerLeader}</Option>)\n                  }\n                </Select>\n              )}\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row gutter={12}>\n          <Col span={24}>\n            <Form.Item label='区域'>\n              {getFieldDecorator('area', {\n              })(\n                <Select placeholder=\"请选择\" showSearch filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}>\n                  {\n                    (historyForm.areaOptions === undefined ? []:historyForm.areaOptions).map((item) => <Option value={item.area} key={item.area}>{item.area}</Option>)\n                  }\n                </Select>\n              )}\n            </Form.Item>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={24}>\n            <div style={{ textAlign: 'right' }}>\n              <Button type=\"primary\" htmlType=\"submit\">搜索</Button>\n              <Button style={{ marginLeft: 8 }} onClick={this.handleReset}>\n                重置\n              </Button>\n            </div>\n          </Col>\n        </Row>\n      </Form>\n    );\n  }\n}\n\nexport default Form.create()(FormCustom);\n","import React, {Component} from 'react';\n// import Pie from '@/components/Chart/Pie/NormalPie';\nimport { connect } from 'dva';\nimport {Row, Col, DatePicker, Button, Card, notification} from 'antd';\nimport moment from 'moment';\nimport TableCustom from \"../../../components/Table/Table\";\nimport FormCustom from \"./Form\";\n\n\n@connect(({ historyTable }) => ({\n  historyTable,// namespace action\n}))\nclass HistoryTable extends Component{\n  constructor(props){\n    super(props);\n    const {dispatch, historyTable} = this.props;\n    const filters = historyTable.filters;\n    filters.month = '2018-11';\n    filters.currentPage = 1;\n    filters.pageSize =10;\n    dispatch({\n      type : 'historyTable/fetchList',\n      payload : filters\n    });\n    dispatch({\n      type: 'historyTable/getFilters',\n      payload: filters\n    });\n  }\n\n  onChange = (page, pageSize) => {\n    const {dispatch, historyTable} = this.props;\n    const filters = historyTable.filters;\n    filters.currentPage = page;\n    filters.pageSize =pageSize;\n    dispatch({\n      type: 'historyTable/fetchList',\n      payload: filters,\n    });\n  };\n\n  onShowSizeChange = (current, size) => {\n    const { dispatch ,historyTable} = this.props;\n    const filters = historyTable.filters;\n    filters.currentPage = current;\n    filters.pageSize = size;\n    dispatch({\n      type: 'historyTable/fetchList',\n      payload: filters,\n    });\n  };\n\n  onVisibleChange = (visible) => {\n    const {dispatch} = this.props;\n    dispatch({\n      type: 'historyTable/showSearch',\n      payload: visible,\n    });\n  };\n\n  handleSubmit = (form,closed) => {\n    console.log(form);\n    const param = form;\n\n    param.pageSize = 10;\n    const {dispatch, historyTable} = this.props;\n    const filters = historyTable.filters;\n    param.month = filters.month;\n    param.pageSize = filters.pageSize;\n    dispatch({\n      type: 'historyTable/fetchList',\n      payload: param\n    });\n    dispatch({\n      type: 'historyTable/getFilters',\n      payload: param\n    });\n    dispatch({\n      type: 'historyTable/search',\n      payload: form,\n    });\n    dispatch({\n      type: 'historyTable/showSearch',\n      payload: closed,\n    });\n  };\n\n  handleConfirmSubmit = (rule, value, callback) => {\n    const { handleConfirmSubmit } = this.props\n    handleConfirmSubmit(rule, value, callback);\n  };\n\n  toDetail = (text) => {\n    const {toDetail} = this.props;\n    toDetail(text);\n  };\n\n  onChangeMonth = (date,dateString) =>{\n    const { dispatch,historyTable} = this.props;\n    const filters = historyTable.filters;\n    filters.month = dateString;\n    dispatch({\n      // type : 'historyTable/fetchListByMonth',\n      type: 'historyTable/fetchList',\n      payload : filters\n    });\n    dispatch({\n      type: 'historyTable/getFilters',\n      payload: filters\n    });\n  };\n\n  // 导出\n  exportByMonth = () =>{\n    const { dispatch,historyTable } = this.props;\n    dispatch({\n      type : 'historyTable/fetchListByMonth',\n      payload :historyTable.filters\n    })\n    notification.open({\n      message: '文件下载',\n      description: '导出文件地址为 E:\\\\data\\\\gldb-admin-bma',\n      duration: 0,\n    });\n  };\n\n  render(){\n    const {historyTable} = this.props;\n\n    const columns = [\n      { title: '商户ID', width: 80, dataIndex: 'spCode', key: 'spCode', fixed: 'left' },\n      { title: '商户名称', width: 250, dataIndex: 'spName', key: 'spName',fixed: 'left',\n        render: (text,record) => <a onClick={this.toDetail.bind(this,record.spCode)}>{text}</a>},\n      { title: '区域', width: 110, dataIndex: 'area', key: 'area'},\n      { title: '区域经理', width: 150, dataIndex: 'regionalManager', key: 'regionalManager'},\n      { title: '业务类型', width: 110, dataIndex: 'bizType', key: 'bizType'},\n      { title: '大区经理', width: 110, dataIndex: 'regionalManagerLeader', key: 'regionalManagerLeader'},\n      { title: '广联DVD销售数', width: 140, dataIndex: 'salesGlDvd', key: 'salesGlDvd'},\n      { title: '广联DVD完成率', width: 140, key: 'salesGlDvdRate', dataIndex: 'salesGlDvdRate'},\n      { title: '广联GPS销售数', width: 140, dataIndex: 'salesGlGps', key: 'salesGlGps' },\n      { title: '广联GPS完成率', width: 140, dataIndex: 'salesGlGpsRate', key: 'salesGlGpsRate' },\n      { title: '嘀嘀虎智能云镜销售数', width: 170, dataIndex: 'salesYunjing', key: 'salesYunjing' },\n      { title: '嘀嘀虎智能云镜完成率', width: 170, dataIndex: 'salesYunjingRate', key: 'salesYunjingRate' },\n      { title: '嘀嘀虎车联网服务激活卡-1年版销售数', width: 150, dataIndex: 'salesDidihuService', key: 'salesDidihuService' },\n      { title: '嘀嘀虎车联网服务激活卡-1年版完成率', width: 150, dataIndex: 'salesDidihuServiceRate', key: 'salesDidihuServiceRate' },\n      { title: '无线车充销售数', width: 120, dataIndex: 'salesWirelessCharge', key: 'salesWirelessCharge' },\n      { title: '无线车充完成率', width: 120, dataIndex: 'salesWirelessChargeRate', key: 'salesWirelessChargeRate' },\n      { title: '纯流媒体后视镜销售数', width: 120, dataIndex: 'salesRearview', key: 'salesRearview' },\n      { title: '纯流媒体后视镜完成率', width: 120, dataIndex: 'salesRearviewRate', key: 'salesRearviewRate' },\n      { title: '全功能_流媒体后视镜销售数', width: 120, dataIndex: 'salesFunctionRearview', key: 'salesFunctionRearview' },\n      { title: '全功能_流媒体后视镜完成率', width: 120, dataIndex: 'salesFunctionRearviewRate', key: 'salesFunctionRearviewRate' },\n    ];\n    const { MonthPicker} = DatePicker;\n    const monthFormat = 'YYYY-MM';\n    return (\n      <Card>\n        <Row>\n          <Col span={24}>\n            <TableCustom\n              columns={columns}\n              dataSource={historyTable.list}\n              total={historyTable.total}\n              scroll={{x: 2725,y: 450}}\n              onChange={this.onChange}\n              onShowSizeChange={this.onShowSizeChange}\n              onVisibleChange={this.onVisibleChange}\n              showSearch={historyTable.showSearch}\n              searchForm={\n                <FormCustom\n                  handleSubmit={this.handleSubmit}\n                  handleConfirmSubmit={this.handleConfirmSubmit}\n                />\n              }\n              searchRight={\n                <div>\n                  <MonthPicker defaultValue={moment('2018-11', monthFormat)} format={monthFormat} onChange={this.onChangeMonth} />\n                  <Button type=\"primary\" icon=\"download\" style={{ marginLeft: 8 }} onClick={this.exportByMonth}>导出数据</Button>\n                </div>\n              }\n            />\n          </Col>\n        </Row>\n      </Card>\n    );\n  }\n}\n\nexport default HistoryTable\n","import React, { Component } from 'react';\nimport { connect } from 'dva';\nimport Table from './components/Table';\nimport Detail from './components/Detail';\nimport PageHeaderWrapper from '@/components/PageHeaderWrapper';\nimport { Card, Row, Col, Form, Select } from 'antd';\nimport SelectCustom from './components/Select'\n\nconst Option = Select.Option;\n\n@connect(({ history }) => ({\n  history\n}))\n\nclass SalesHistory extends Component {\n\n  constructor(props) {\n    super(props);\n    const {dispatch, history} = this.props;\n    const param = \"sum\";\n    dispatch({\n      type: 'history/fetchChange',\n      payload: {\n        taskType: param\n      }\n    })\n  }\n\n  toDetail = (text, e) => {\n    const { dispatch } = this.props;\n    dispatch({\n      type: 'history/showDetail',\n      payload: {\n        showDetail: true,\n        spCode: text\n      }\n    });\n  };\n\n  goBack = () => {\n    const { dispatch } = this.props;\n    dispatch({\n      type: 'history/showDetail',\n      payload: {\n        showDetail: false,\n        spCode: ''\n      }\n    });\n  };\n\n  handleSelectChange = (value) => {\n    console.log(value);\n    let param = '';\n    switch(value){\n      case \"总销售任务完成度\":param = \"sum\"; break;\n      case \"广联DVD任务完成度\":param = \"dvd\";break;\n      case \"广联GPS任务完成度\":param = \"gps\";break;\n      case \"嘀嘀虎智能云镜任务完成度\":param = \"yunjing\";break;\n      case \"嘀嘀虎车联网服务激活卡-1年版任务完成度\":param = \"didihuService\";break;\n      case \"无线车充任务完成度\":param = \"wirelessCharge\";break;\n      case \"纯流媒体后视镜任务完成度\":param = \"rearview\";break;\n      case \"全功能_流媒体后视镜任务完成度数\":param = \"functionRearview\";break;\n      default:param = \"sum\"\n    }\n    const { dispatch } = this.props;\n    console.log(param);\n    dispatch({\n      // type: 'history/selectChange',\n      type: 'history/fetchChange',\n      payload: {\n        taskType: param\n      }\n    })\n  }\n\n  render() {\n\n    const { history } = this.props;\n    let view = '';\n\n    if (!history.showDetail) {\n      view = (\n        <div>\n\n          <Table toDetail={this.toDetail} />\n          <SelectCustom\n             data={chartData}\n             onchange={this.handleSelectChange}\n         /> \n        </div>\n      )\n    } else {\n      view = (\n        <div>\n          <Detail spCode={history.spCode} goBack={this.goBack} />\n        </div>\n      );\n    }\n    // 图表数据\n    const chartData = {\n      lineData: history.lineData,\n      barData1: history.barData1,\n      barData2: history.barData2,\n      xAxisData: history.xAxisData\n    }\n\n    return (\n      <PageHeaderWrapper>\n        {view}\n      </PageHeaderWrapper>\n    );\n  }\n}\n\n\nexport default SalesHistory\n"],"sourceRoot":""}