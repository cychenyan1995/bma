{"version":3,"sources":["src/pages/salesHistory/models/detail.js"],"names":["_index","__webpack_require__","_history","namespace","state","list","total","filters","detail","lineData","barData1","barData2","xAxisData","currentPage","effects","fetchDetail","_regenerator","default","mark","_callee","_ref","_ref2","payload","call","put","response","wrap","_context","prev","next","queryMonthlyDetailList","sent","type","stop","this","fetchChart","_callee2","_ref3","_ref4","_context2","queryChartListBySp","reducers","getDetail","action","code","_objectSpread2","data","pageTotal","pageNum","notification","error","message","description","getFilters","getChart","rateList","saleList","taskList","monthList"],"mappings":"qNAAAA,EAAAC,EAAA,QACAC,EAAAD,EAAA,WAGEE,UAAW,gBAEXC,OACEC,QACAC,MAAO,EACPC,WACAC,OAAO,KACPC,YACAC,YACAC,YACAC,aACAC,YAAa,GAEfC,SACIC,YADKC,EAAAC,QAAAC,KAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAT,EAAAC,QAAAS,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEY,OADJP,EADRF,EACQE,QAAWC,EADnBF,EACmBE,KAAMC,EADzBH,EACyBG,IADzBG,EAAAE,KAAA,EAEkBN,EAAKO,yBAAwBR,GAF/C,OAGL,OADMG,EAFDE,EAAAI,KAAAJ,EAAAE,KAAA,EAGCL,GACJQ,KAAM,YACNV,QAASG,IALN,wBAAAE,EAAAM,SAAAd,EAAAe,QAQLC,WARKnB,EAAAC,QAAAC,KAAA,SAAAkB,EAAAC,EAAAC,GAAA,IAAAhB,EAAAC,EAAAC,EAAAC,EAAA,OAAAT,EAAAC,QAAAS,KAAA,SAAAa,GAAA,eAAAA,EAAAX,KAAAW,EAAAV,MAAA,OASY,OADLP,EARPe,EAQOf,QAAWC,EARlBe,EAQkBf,KAAMC,EARxBc,EAQwBd,IARxBe,EAAAV,KAAA,EASkBN,EAAKiB,qBAAoBlB,GAT3C,OAUL,OADMG,EATDc,EAAAR,KAAAQ,EAAAV,KAAA,EAUCL,GACJQ,KAAM,WACNV,QAASG,IAZN,wBAAAc,EAAAN,SAAAG,EAAAF,SAgBTO,UACEC,UAAUtC,EAAOuC,GACf,GAAIA,EAAOrB,QAAQsB,KAAM,CACvB,GAA4B,MAAxBD,EAAOrB,QAAQsB,KACjB,SAAAC,EAAA5B,YACKb,GACHI,OAAQmC,EAAOrB,QAAQwB,KAAK,GAC5BzC,KAAKsC,EAAOrB,QAAQwB,KACpBxC,MAAOqC,EAAOrB,QAAQyB,UACtBlC,YAAa8B,EAAOrB,QAAQ0B,UAGhCC,eAAaC,OACXC,QAASR,EAAOrB,QAAQsB,KACxBQ,YAAaT,EAAOrB,QAAQ6B,UAGhC,OAAO/C,GAETiD,WAAWjD,EAAMuC,GACf,SAAAE,EAAA5B,YACKb,GACHG,QAASoC,EAAOrB,WAGpBgC,SAASlD,EAAMuC,GACb,SAAAE,EAAA5B,YACKb,GACHK,SAAUkC,EAAOrB,QAAQwB,KAAKS,SAC9B7C,SAAUiC,EAAOrB,QAAQwB,KAAKU,SAC9B7C,SAAUgC,EAAOrB,QAAQwB,KAAKW,SAC9B7C,UAAU+B,EAAOrB,QAAQwB,KAAKY","file":"5.async.js","sourcesContent":["import {notification} from \"antd/lib/index\";\nimport {queryMonthlyDetailList, queryChartListBySp} from '@/services/history';\n\nexport default {\n  namespace: 'historyDetail',\n\n  state: {\n    list: [],\n    total: 0,\n    filters:{},\n    detail:null,\n    lineData: [],\n    barData1: [],\n    barData2: [],\n    xAxisData: [],\n    currentPage: 1\n  },\n  effects: {\n    * fetchDetail({payload}, {call, put}) {\n      const response = yield call(queryMonthlyDetailList, payload);\n      yield put({\n        type: 'getDetail',\n        payload: response,\n      });\n    },\n    * fetchChart({payload}, {call, put}) {\n      const response = yield call(queryChartListBySp, payload);\n      yield put({\n        type: 'getChart',\n        payload: response,\n      });\n    },\n  },\n  reducers: {\n    getDetail(state, action) {\n      if (action.payload.code) {\n        if (action.payload.code === 1000) {\n          return {\n            ...state,\n            detail: action.payload.data[0],\n            list:action.payload.data,\n            total: action.payload.pageTotal,\n            currentPage: action.payload.pageNum\n          };\n        }\n        notification.error({\n          message: action.payload.code,\n          description: action.payload.message,\n        });\n      }\n      return state;\n    },\n    getFilters(state,action){\n      return {\n        ...state,\n        filters: action.payload\n      }\n    },\n    getChart(state,action){\n      return{\n        ...state,\n        lineData: action.payload.data.rateList,\n        barData1: action.payload.data.saleList,\n        barData2: action.payload.data.taskList,\n        xAxisData:action.payload.data.monthList,\n      }\n    },\n  },\n};\n"],"sourceRoot":""}