(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{5:function(e,t){},"7D0q":function(e,t,a){"use strict";var i=a("284h"),l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.EditableFormRow=t.EditableRow=t.EditableContext=t.default=void 0,a("5NDa");var s=l(a("5rEg"));a("giR+");var r=l(a("fyUT"));a("y8nQ");var d=l(a("Vl3Y")),n=l(a("QILm")),o=i(a("q1tI")),u=o.default.createContext();t.EditableContext=u;var p=e=>{var t=e.form,a=(e.index,(0,n.default)(e,["form","index"]));return o.default.createElement(u.Provider,{value:t},o.default.createElement("tr",a))};t.EditableRow=p;var h=d.default.create()(p);t.EditableFormRow=h;var c=d.default.Item;class f extends o.Component{constructor(){super(...arguments),this.getInput=(()=>{return"number"===this.props.inputType?o.default.createElement(r.default,{min:0,formatter:e=>`${e}`.replace(".","")}):o.default.createElement(s.default,null)})}render(){var e=this.props,t=e.editing,a=e.dataIndex,i=e.title,l=(e.inputType,e.record),s=(e.index,(0,n.default)(e,["editing","dataIndex","title","inputType","record","index"]));return o.default.createElement(u.Consumer,null,e=>{var r=e.getFieldDecorator;return o.default.createElement("td",s,t?o.default.createElement(c,{style:{margin:0}},r(a,{rules:[{required:!0,message:`\u8bf7\u8f93\u5165 ${i}!`}],initialValue:l[a]})(this.getInput())):s.children)})}}var m=f;t.default=m},EJb5:function(e,t,a){"use strict";var i=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var s=i(a("bx4M"));a("14J3");var r=i(a("BMrR"));a("jCWc");var d=i(a("kPKH"));a("+L6B");var n=i(a("2/Rp")),o=i(a("MVZn"));a("P2fV");var u=i(a("NJEC"));a("2qtc");var p=i(a("kLXV"));a("y8nQ");var h,c,f=i(a("Vl3Y")),m=i(a("zHco")),g=l(a("q1tI")),v=i(a("Leqq")),b=a("MuoO"),k=i(a("yT+T")),y=l(a("7D0q")),E=a("7DNP"),S=i(a("WOKu")),x=(f.default.Item,h=(0,b.connect)(e=>{var t=e.salesTask;return{salesTask:t}}),h(c=class extends g.Component{constructor(e){super(e),this.toSendInfo=((e,t)=>{var a="";switch(t){case"leader":a=e.regionalManagerLeader;break;case"manager":a=e.regionalManager;break}this.setState({TableVisible:!0,type:t,name:a})}),this.importTask=(()=>{this.setState({importVisible:!0})}),this.sendMessage=(()=>{var e=this.props.salesTask;if(0===e.list.length)p.default.warning({title:"\u63d0\u793a\u4fe1\u606f",content:"\u672c\u6708\u8fd8\u6ca1\u6709\u5bfc\u5165\u4efb\u52a1\u6570\uff0c\u4e0d\u80fd\u53d1\u5e03"});else{var t=p.default.confirm,a=this;t({title:"\u662f\u5426\u786e\u5b9a\u53d1\u5e03\u4efb\u52a1?",content:"\u53d1\u5e03\u4efb\u52a1\u540e\u4e0d\u80fd\u4fee\u6539\u4efb\u52a1\u6570",onOk(){a.state.columns;var e=a.props.dispatch;return e({type:"salesTask/fetchSendMessage",payload:{}}),new Promise((e,t)=>{setTimeout(e,1e3)}).catch(()=>console.log("Oops errors!"))},onCancel(){}})}}),this.onChange=((e,t)=>{var a=this.props,i=a.dispatch;a.salesTask;i({type:"salesTask/fetchTaskList",payload:{currentPage:e,pageSize:t}}),this.setState({page:e,pageSize:t})}),this.onShowSizeChange=((e,t)=>{var a=this.props,i=a.dispatch;a.salesTask;i({type:"salesTask/fetchTaskList",payload:{currentPage:e,pageSize:t}}),this.setState({page:e,pageSize:t})}),this.isEditing=(e=>{return e.id===this.state.editingKey}),this.cancel=(()=>{this.setState({editingKey:""})}),this.toSpDetail=(e=>{this.setState({detailSpVisible:!0,spCode:e})}),this.hideModal=(()=>{this.setState({importVisible:!1})}),this.hideTableModal=(()=>{this.setState({TableVisible:!1})}),this.submitModal=(()=>{this.formRef.props.form.validateFieldsAndScroll((e,t)=>{if(!e){var a=this.props.dispatch;a({type:"salesTask/fetchTaskList",payload:{currentPage:1,pageSize:10}}),this.setState({importVisible:!1})}})});var t=[{title:"\u5546\u6237ID",width:150,dataIndex:"spCode",fixed:"left"},{title:"\u5546\u6237\u540d\u79f0",width:300,dataIndex:"spName",render:(e,t)=>{return g.default.createElement(E.Link,{to:{pathname:"/base/detail",query:{type:"task",record:t}}},e)},fixed:"left"},{title:"\u533a\u57df",width:150,dataIndex:"area"},{title:"\u5927\u533a\u7ecf\u7406",width:150,dataIndex:"regionalManagerLeader"},{title:"\u533a\u57df\u7ecf\u7406",width:150,dataIndex:"regionalManager"},{title:"\u4e1a\u52a1\u7c7b\u578b",width:150,dataIndex:"bizType"},{title:"\u4efb\u52a1\u671f\u6570",width:150,dataIndex:"month"},{title:"\u5e7f\u8054DVD\u4efb\u52a1\u6570",width:150,dataIndex:"tasknumDvd",editable:!0},{title:"\u5e7f\u8054GPS\u4efb\u52a1\u6570",width:150,dataIndex:"tasknumGps",editable:!0},{title:"\u5600\u5600\u864e\u667a\u80fd\u4e91\u955c\u4efb\u52a1\u6570",width:150,dataIndex:"tasknumYunjing",editable:!0},{title:"\u5600\u5600\u864e\u8f66\u8054\u7f51\u670d\u52a1\u6fc0\u6d3b\u5361-1\u5e74\u7248\u4efb\u52a1\u6570",width:150,dataIndex:"tasknumDidihuService",editable:!0},{title:"\u65e0\u7ebf\u8f66\u5145\u4efb\u52a1\u6570",width:150,dataIndex:"tasknumWirelessCharge",editable:!0},{title:"\u7eaf\u6d41\u5a92\u4f53\u540e\u89c6\u955c\u4efb\u52a1\u6570",width:150,dataIndex:"tasknumRearview",editable:!0},{title:"\u5168\u529f\u80fd_\u6d41\u5a92\u4f53\u540e\u89c6\u955c\u4efb\u52a1\u6570",width:150,dataIndex:"tasknumFunctionRearview",editable:!0}],a={title:"\u64cd\u4f5c",width:150,dataIndex:"operation",render:(e,t)=>{var a=this.isEditing(t);return g.default.createElement("div",null,a?g.default.createElement("span",null,g.default.createElement(y.EditableContext.Consumer,null,e=>g.default.createElement("a",{href:"javascript:;",onClick:()=>this.save(e,t.id),style:{marginRight:8}},"\u4fdd\u5b58")),g.default.createElement(u.default,{title:"\u786e\u5b9a\u53d6\u6d88?",onConfirm:()=>this.cancel(t.id)},g.default.createElement("a",null,"\u53d6\u6d88"))):g.default.createElement("a",{onClick:()=>this.edit(t.id)},"\u7f16\u8f91"))}};this.state={columns:t,operationCol:a,editingKey:"",importVisible:!1,detailVisible:!1,TableVisible:!1,detailSpVisible:!1,page:1,pageSize:10};var i=e.dispatch;e.salesTask;i({type:"salesTask/fetchTaskList",payload:{currentPage:this.state.page,pageSize:this.state.pageSize}})}edit(e){this.setState({editingKey:e})}save(e,t){e.validateFields((e,a)=>{if(!e){var i=this.props,l=i.dispatch,s=i.salesTask,r=parseInt(a.tasknumDidihuService),d=parseInt(a.tasknumDvd),n=parseInt(a.tasknumFunctionRearview),u=parseInt(a.tasknumGps),h=parseInt(a.tasknumRearview),c=parseInt(a.tasknumWirelessCharge),f=parseInt(a.tasknumYunjing);if(0===r&&0===d&&0===n&&0===u&&0===h&&0===c&&0===f)p.default.warning({title:"\u63d0\u793a\u4fe1\u606f",content:"\u4e0d\u80fd\u5c06\u6240\u6709\u4ea7\u54c1\u7684\u4efb\u52a1\u6570\u90fd\u8bbe\u7f6e\u4e3a0"});else{var m=[...s.list],g=m.findIndex(e=>t===e.id);if(g>-1){var v=m[g],b=(0,o.default)({},v,a);l({type:"salesTask/fetchUpdateTask",payload:(0,o.default)({currentPage:this.state.page,pageSize:this.state.pageSize},b)}),this.setState({editingKey:""})}else m.push(a),this.setState({data:m,editingKey:""})}}})}render(){var e=this.props.salesTask,t=this.state.columns;1===e.publishStatus&&15===t.length?(t=this.state.columns,t.pop()):0===e.publishStatus&&14===t.length&&t.push(this.state.operationCol);var a={body:{row:y.EditableFormRow,cell:y.default}};return t=t.map(e=>{return e.editable?(0,o.default)({},e,{onCell:t=>({record:t,inputType:"number",dataIndex:e.dataIndex,title:e.title,editing:this.isEditing(t),test:t.id})}):e}),g.default.createElement(m.default,null,g.default.createElement(s.default,{bordered:!1},g.default.createElement(r.default,null,g.default.createElement(d.default,null,g.default.createElement(n.default,{type:"primary",disabled:1===e.publishStatus,style:{marginRight:"20px"},onClick:this.importTask},"\u5bfc\u5165\u4efb\u52a1\u914d\u7f6e"),g.default.createElement(p.default,{title:"\u5bfc\u5165\u6587\u4ef6",visible:this.state.importVisible,onCancel:this.hideModal,footer:null},g.default.createElement(k.default,{onOk:this.submitModal,onCancel:this.hideModal,wrappedComponentRef:e=>this.formRef=e})),g.default.createElement(n.default,{type:"primary",onClick:this.sendMessage,disabled:1===e.publishStatus},"\u53d1\u5e03\u4efb\u52a1")))),g.default.createElement(p.default,{title:"\u6211\u7684\u6708\u62a5\u8868",visible:this.state.TableVisible,onCancel:this.hideTableModal,footer:null},g.default.createElement(S.default,{type:this.state.type,name:this.state.name})),g.default.createElement(v.default,{components:a,columns:t,scroll:{x:1===e.publishStatus?2250:2400,y:600},dataSource:e.list,total:e.total,onChange:this.onChange,onShowSizeChange:this.onShowSizeChange,page:e.currentPage}))}})||c),T=x;t.default=T},WOKu:function(e,t,a){"use strict";var i=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var s,r,d=i(a("wCAj")),n=l(a("q1tI")),o=i(a("WmWl")),u=a("MuoO"),p=(s=(0,u.connect)(e=>{var t=e.sendMessage;return{sendMessage:t}}),s(r=class extends n.Component{constructor(e){super(e),this.toDetail=((e,t)=>{this.setState({showDetail:!0,monthSalesTaskDetailList:e.monthSalesTaskDetailList,title:t})}),this.goBack=(()=>{this.setState({showDetail:!1})}),this.state={showDetail:!1,monthSalesTaskDetailList:[],title:""};var t=this.props.dispatch;t({type:"sendMessage/fetchQuerySendInfo",payload:{type:this.props.type,name:this.props.name}})}render(){var e=this.props.sendMessage,t=e.data,a=[{title:"\u4efb\u52a1\u8d23\u4efb\u4eba",width:100,dataIndex:"manager",render:(e,t)=>{return n.default.createElement("span",null,n.default.createElement("a",{href:"javascript:;",onClick:()=>this.toDetail(t,e)},e))}},{title:"\u603b\u4efb\u52a1\u6570",width:80,dataIndex:"totalTaskNum"},{title:"\u603b\u9500\u552e\u6570",width:80,dataIndex:"totalSaleNum"},{title:"\u4efb\u52a1\u5b8c\u6210\u7387",width:80,dataIndex:"totalRatio"}],i="";return i=this.state.showDetail?n.default.createElement(o.default,{goBack:this.goBack,dataSource:this.state.monthSalesTaskDetailList,title:this.state.title}):n.default.createElement(d.default,{style:{textAlign:"center"},columns:a,dataSource:t,bordered:!0,title:this.setTitle,pagination:!1}),n.default.createElement("div",null,i)}})||r),h=p;t.default=h},"yT+T":function(e,t,a){"use strict";var i=a("284h"),l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var s=l(a("BMrR"));a("jCWc");var r=l(a("kPKH")),d=l(a("pVnL"));a("DZo9");var n=l(a("8z0m"));a("+L6B");var o=l(a("2/Rp"));a("Pwec");var u=l(a("CtXQ"));a("y8nQ");var p=l(a("Vl3Y"));a("+BJd");var h=l(a("mr32"));a("2qtc");var c=l(a("kLXV"));a("miYZ");var f=l(a("tsqr")),m=i(a("q1tI")),g=l(a("Z63m"));class v extends m.Component{constructor(e){super(e),this.normFile=(e=>{return Array.isArray(e)?e:e&&e.fileList}),this.handleUpload=(()=>{var e=this.state.fileList,t=(e[0],new FormData);t.append("file",e[0]),this.setState({uploading:!0}),(0,g.default)({url:"/gldb-admin-bma/salesTask/importSalesTask",method:"post",processData:!1,data:t,success:e=>{0===e.data[0].isImported?f.default.success("upload successfully."):1===e.data[0].isImported?f.default.error("\u4e0a\u4f20\u6587\u4ef6\u4e0d\u4e3a.xls\u6216.xlsx\u683c\u5f0f"):2===e.data[0].isImported?f.default.error("\u5bfc\u5165Excel\u6570\u636e\u5931\u8d25"):3===e.data[0].isImported?f.default.error("\u5bfc\u5165\u7684Excel\u8868\u6570\u636e\u4e3a\u7a7a"):4===e.data[0].isImported&&c.default.warning({width:"730px",title:"\u5b58\u5728\u5bfc\u5165\u6570\u636e\u6709\u9519\u8bef\uff0c\u8bf7\u4fee\u6539",content:m.default.createElement("div",null,e.data[0].failList.map(e=>m.default.createElement(h.default,{style:{marginTop:"10px",fontSize:"15px"},color:"volcano"},e.result.spName||"\u9519\u8bef\u4fe1\u606f"," : ",e.errorMsg))),okText:"\u77e5\u9053\u4e86"}),this.setState({fileList:[],uploading:!1});var t=this.props.onOk;t(),this.props.form.setFieldsValue({upload:[]})},error:()=>{this.setState({fileList:[],uploading:!1}),this.props.form.setFieldsValue({upload:[]}),f.default.error("upload failed.")}})}),this.cancelUpload=(()=>{this.setState({fileList:[],uploading:!1}),this.props.form.setFieldsValue({upload:[]});var e=this.props.onCancel;e()}),this.state={fileList:[],uploading:!1}}render(){var e=p.default.Item,t=this.state,a=t.uploading,i=t.fileList,l={labelCol:{span:5},wrapperCol:{span:14}},h=this.props.form,c=h.getFieldDecorator,f={name:"file",headers:{authorization:"authorization-text"},onRemove:e=>{this.setState(t=>{var a=t.fileList.indexOf(e),i=t.fileList.slice();return i.splice(a,1),{fileList:i}})},beforeUpload:e=>{return this.setState(t=>({fileList:[e]})),this.props.form.setFieldsValue({upload:[e]}),!1},fileList:i};return m.default.createElement(p.default,{className:"ant-advanced-search-form",method:"post",encType:"multipart/form-data"},m.default.createElement(s.default,null,m.default.createElement(r.default,{span:24},m.default.createElement(e,(0,d.default)({label:"\u5bfc\u5165"},l),c("upload",{valuePropName:"fileList",getValueFromEvent:this.normFile,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0a\u4f20\u6587\u4ef6!"}]})(m.default.createElement(n.default,f,m.default.createElement(o.default,{style:{marginLeft:"20px"},disabled:1===i.length},m.default.createElement(u.default,{type:"upload"})," \u9009\u62e9\u6587\u4ef6")))))),m.default.createElement(s.default,null,m.default.createElement(r.default,{offset:5},m.default.createElement(o.default,{type:"primary",loading:a,htmlType:"submit",style:{marginRight:"20px"},onClick:this.handleUpload,disabled:0===i.length}," ",a?"\u52a0\u8f7d\u4e2d":"\u786e\u8ba4\u5bfc\u5165"),m.default.createElement(o.default,{type:"primary",onClick:this.cancelUpload},"\u53d6\u6d88\u5bfc\u5165"))))}}var b=p.default.create()(v);t.default=b}}]);
//# sourceMappingURL=4.async.js.map