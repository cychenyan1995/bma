{"version":3,"sources":["src/pages/detail/detail.js"],"names":["_react","_interopRequireWildcard","__webpack_require__","_index","_Table","_interopRequireDefault","_Select","_router","Detail","connect","_ref","detailWeb","Component","constructor","props","super","this","onChange","page","pageSize","_this$props","dispatch","filters","_this$props$location$","location","query","record","spCode","area","currentPage","type","payload","onShowSizeChange","current","size","_this$props2","detail","_this$props$location$2","handleSelectChange","value","param","_this$props3","_this$props$location$3","taskType","_this$props$location$4","render","_this$props$location$5","list","console","log","columns","title","width","key","dataIndex","fixed","data","data1","spName","regionalManagerLeader","regionalManager","bizType","chartData","lineData","barData1","barData2","xAxisData","default","createElement","style","textAlign","Link","to","_button","_icon","fontSize","_divider","orientation","_card","bordered","_row","_col","span","_list","split","dataSource","renderItem","item","Item","scroll","x","total","onVisibleChange","showSearch","onchange"],"mappings":"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","file":"11.async.js","sourcesContent":["import React, { Component } from 'react';\nimport { Card, Col, List, Row, Button, Icon, DatePicker, Divider } from 'antd';\nimport { connect } from \"dva/index\";\nimport TableCustom from \"@/components/Table/Table\";\nimport SelectCustom from '@/pages/salesHistory/components/Select';\nimport { Link } from 'dva/router';\n\n@connect(({ detailWeb }) => ({\n  detailWeb\n}))\nclass Detail extends Component {\n  constructor(props) {\n    super(props);\n    const { dispatch } = props;\n    const { spCode,area } = this.props.location.query.record;\n    const param = \"sum\";\n    dispatch({\n      type: 'detailWeb/fetchDetail',\n      payload: {\n        spCode: spCode,\n        area: area,\n        currentPage: 1,\n        pageSize: 10\n      }\n    });\n    dispatch({\n      type: 'detailWeb/getFilters',\n      payload: {\n        currentPage: 1,\n        pageSize: 10\n      }\n    });\n    dispatch({\n      type: 'detailWeb/fetchChart',\n      payload: {\n        spCode: spCode,\n        area: area,\n        taskType: param\n      }\n    });\n  }\n\n  /*  goBack = () => {\n      const type = this.props.location.query.type;\n      console.log(type)\n      goBack();\n    };*/\n\n  onChange = (page, pageSize) => {\n    const { dispatch, detailWeb } = this.props;\n    const filters = detailWeb.filters;\n    const { spCode,area } = this.props.location.query.record;\n    filters.spCode = spCode;\n    filters.area = area;\n    filters.currentPage = page;\n    filters.pageSize = pageSize;\n    dispatch({\n      type: 'detailWeb/fetchDetail',\n      payload: filters,\n    });\n  };\n\n  onShowSizeChange = (current, size) => {\n    //console.log(current);\n    //console.log(size);\n    const { dispatch, detail } = this.props;\n    const filters = detailWeb.filters;\n    //filters.spCode = this.props.location.query.record.spCode;\n    const { spCode,area } = this.props.location.query.record;\n    filters.spCode = spCode;\n    filters.area = area;\n    filters.currentPage = current;\n    filters.pageSize = size;\n    dispatch({\n      type: 'detailWeb/fetchDetail',\n      payload: filters,\n    });\n  };\n\n  handleSelectChange = (value) => {\n    //console.log(value);\n    let param = '';\n    switch (value) {\n      case \"总销售任务完成度\":\n        param = \"sum\";\n        break;\n      case \"广联DVD任务完成度\":\n        param = \"dvd\";\n        break;\n      case \"广联GPS任务完成度\":\n        param = \"gps\";\n        break;\n      case \"嘀嘀虎智能云镜任务完成度\":\n        param = \"yunjing\";\n        break;\n      case \"嘀嘀虎车联网服务激活卡-1年版任务完成度\":\n        param = \"didihuService\";\n        break;\n      case \"无线车充任务完成度\":\n        param = \"wirelessCharge\";\n        break;\n      case \"纯流媒体后视镜任务完成度\":\n        param = \"rearview\";\n        break;\n      case \"全功能_流媒体后视镜任务完成度数\":\n        param = \"functionRearview\";\n        break;\n      default:\n        param = \"sum\"\n    }\n    //console.log(param);\n    const { dispatch, detailWeb } = this.props;\n    const filters = detailWeb.filters;\n    //filters.spCode = this.props.location.query.record.spCode;\n    const { spCode,area } = this.props.location.query.record;\n    filters.spCode = spCode;\n    filters.area = area;\n    dispatch({\n      type: 'detailWeb/fetchChart',\n      payload: {\n        spCode: filters.spCode,\n        area: filters.area,\n        taskType: param\n      }\n    })\n  }\n\n\n\n  render() {\n    const { detailWeb } = this.props;\n    const { detail, list } = detailWeb;\n\n    const {type, record} = this.props.location.query;\n    console.log(type)\n\n    const columns = [\n      { title: '任务期数', width: 100, key: 'month', dataIndex: 'month', fixed: 'left' },\n      { title: '广联DVD销售数', width: 140, dataIndex: 'salesGlDvd', key: 'salesGlDvd' },\n      { title: '广联DVD完成率', width: 140, key: 'salesGlDvdRate', dataIndex: 'salesGlDvdRate' },\n      { title: '广联GPS销售数', width: 140, dataIndex: 'salesGlGps', key: 'salesGlGps' },\n      { title: '广联GPS完成率', width: 140, dataIndex: 'salesGlGpsRate', key: 'salesGlGpsRate' },\n      { title: '嘀嘀虎智能云镜销售数', width: 130, dataIndex: 'salesYunjing', key: 'salesYunjing' },\n      { title: '嘀嘀虎智能云镜完成率', width: 130, dataIndex: 'salesYunjingRate', key: 'salesYunjingRate' },\n      { title: '嘀嘀虎车联网服务激活卡-1年版销售数', width: 170, dataIndex: 'salesDidihuService', key: 'salesDidihuService' },\n      { title: '嘀嘀虎车联网服务激活卡-1年版完成率', width: 170, dataIndex: 'salesDidihuServiceRate', key: 'salesDidihuServiceRate' },\n      { title: '无线车充销售数', width: 130, dataIndex: 'salesWirelessCharge', key: 'salesWirelessCharge' },\n      { title: '无线车充完成率', width: 130, dataIndex: 'salesWirelessChargeRate', key: 'salesWirelessChargeRate' },\n      { title: '纯流媒体后视镜销售数', width: 130, dataIndex: 'salesRearview', key: 'salesRearview' },\n      { title: '纯流媒体后视镜完成率', width: 130, dataIndex: 'salesRearviewRate', key: 'salesRearviewRate' },\n      { title: '全功能_流媒体后视镜销售数', width: 140, dataIndex: 'salesFunctionRearview', key: 'salesFunctionRearview' },\n      { title: '全功能_流媒体后视镜完成率', width: 140, dataIndex: 'salesFunctionRearviewRate', key: 'salesFunctionRearviewRate' }\n    ];\n\n    let data = '';\n    let data1 = '';\n    if (record) {\n      data = [\n        `商户名称：${record.spName === null ? '' : record.spName}`,\n        `区域：${record.area === null ? '' : record.area}`,\n        `一级责任人：${record.regionalManagerLeader === null ? '' : record.regionalManagerLeader}`,\n        `二级责任人：${record.regionalManager === null ? '' : record.regionalManager}` \n      ];\n      data1 = [\n        `业务类型：${record.bizType === null ? '' : record.bizType}`\n      ];\n    }\n\n    // 图表数据\n    const chartData = {\n      lineData: detailWeb.lineData,\n      barData1: detailWeb.barData1,\n      barData2: detailWeb.barData2,\n      xAxisData: detailWeb.xAxisData\n    }\n\n    return (\n      <div style={{textAlign: 'left'}}>\n        <Link to={type === 'task' ? '/base/salesTask' : '/base/salesHistory'}>\n          <Button>{/* onClick={this.goBack}  to=\"/base/salesTask\"*/}\n            <Icon type=\"left-circle\" style={{fontSize:'20px'}}>返回</Icon>\n          </Button>\n        </Link>\n        <Divider orientation=\"left\">\n          <strong>商户销售分析</strong>\n        </Divider>\n        <Card bordered={false}>\n          <Row>\n            <Col span={12}>\n              <List\n                split={false}\n                dataSource={data}\n                renderItem={item => (<List.Item>{item}</List.Item>)}\n              />\n            </Col>\n            <Col span={12}>\n              <List\n                split={false}\n                dataSource={data1}\n                renderItem={item => (<List.Item>{item}</List.Item>)}\n              />\n            </Col>\n          </Row>\n          <TableCustom\n            columns={columns}\n            scroll={{x: 2000}}\n            dataSource={detailWeb.list}\n            total={detailWeb.total}\n            onChange={this.onChange}\n            onShowSizeChange={this.onShowSizeChange}\n            onVisibleChange={this.onVisibleChange}\n            showSearch={detailWeb.showSearch}\n            page={detailWeb.currentPage}\n          />\n          <SelectCustom\n            data={chartData}\n            onchange={this.handleSelectChange}\n          />\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default Detail;\n"],"sourceRoot":""}