{"version":3,"sources":["src/pages/sendMessage/index.js"],"names":["_react","_interopRequireWildcard","__webpack_require__","_Detail","_interopRequireDefault","_dva","SendMessage","connect","_ref","sendMessage","Component","constructor","props","super","this","setTitle","time","match","params","toDetail","record","text","setState","showDetail","monthSalesTaskDetailList","title","goBack","state","addColumns","width","dataIndex","_this$props$match$par","type","name","console","log","dispatch","payload","month","render","dataSource","data","columns","default","createElement","href","onClick","taskType","concat","view","_table","style","textAlign","bordered","pagination","_card"],"mappings":"8PAAAA,EAAAC,EAAAC,EAAA,SAEAC,EAAAC,EAAAF,EAAA,SACAG,EAAAH,EAAA,QAKMI,MAHL,EAAAD,EAAAE,SAAQC,IAAA,IAAGC,EAAHD,EAAGC,YAAH,OACPA,mCAEwBC,YAExBC,YAAYC,GACVC,MAAMD,GADWE,KAkCnBC,SAAW,MAGT,IAAMC,EAAOF,KAAKF,MAAMK,MAAMC,OAAOF,KACrC,MAAO,eAAOA,EAAO,+CAtCJF,KAyCnBK,SAAW,EAACC,EAAQC,KAElBP,KAAKQ,UAAWC,YAAY,EAAMC,yBAA0BJ,EAAOI,yBAA0BC,MAAOJ,MA3CnFP,KAgDnBY,OAAS,MACPZ,KAAKQ,UAAWC,YAAY,MA/C5BT,KAAKa,OACHJ,YAAY,EACZC,4BACAC,MAAO,GACPG,aACEH,MAAO,2BAAQI,MAAO,GAAIC,UAAW,iBACrCL,MAAO,iCAASI,MAAO,GAAIC,UAAW,gBARzB,IAAAC,EAmBUjB,KAAKF,MAAMK,MAAMC,OAArCc,EAnBUD,EAmBVC,KAAMC,EAnBIF,EAmBJE,KAAMjB,EAnBFe,EAmBEf,KAEnBkB,QAAQC,IAAIH,EAAMC,GArBD,IAuBTG,EAAatB,KAAKF,MAAlBwB,SACRA,GACEJ,KAAM,iCACNK,SACEL,KAAMA,EACNC,KAAMA,EACNK,MAAOtB,KAuBbuB,SAAS,IAIC9B,EAAgBK,KAAKF,MAArBH,YACF+B,EAAa/B,EAAYgC,KAE3BC,IACAjB,MAAO,iCACPI,MAAO,IACPC,UAAW,UACXS,OAAQ,CAAClB,EAAMD,KACb,OACEpB,EAAA2C,QAAAC,cAAA,YAAM5C,EAAA2C,QAAAC,cAAA,KAAGC,KAAK,eAAeC,QAAS,IAAMhC,KAAKK,SAASC,EAAOC,IAAQA,OAI7EI,MAAO,2BAAQI,MAAO,GAAIC,UAAW,iBAKnCiB,EAAWjC,KAAKF,MAAMK,MAAMC,OAAO6B,SAGzB,MAAbA,IACDL,EAAUA,EAAQM,OAAOlC,KAAKa,MAAMC,aAGtC,IAAIqB,EAAO,GAkBX,OANEA,EAXGnC,KAAKa,MAAMJ,WAYZvB,EAAA2C,QAAAC,cAACzC,EAAAwC,SAAOjB,OAAQZ,KAAKY,OAAQc,WAAY1B,KAAKa,MAAMH,yBAA0BC,MAAOX,KAAKa,MAAMF,MAAOsB,SAAUA,IAVjH/C,EAAA2C,QAAAC,cAAAM,EAAAP,SAAOQ,OAAQC,UAAW,UAC1BV,QAASA,EACTF,WAAYA,EACZa,UAAQ,EACR5B,MAAOX,KAAKC,SACZuC,YAAY,IAWdtD,EAAA2C,QAAAC,cAAAW,EAAAZ,QAAA,KACCM,YAMQ3C","file":"12.async.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Card, Table } from 'antd';\r\nimport Detail from './components/Detail';\r\nimport { connect } from 'dva';\r\n\r\n@connect(({ sendMessage }) => ({\r\n  sendMessage\r\n}))\r\nclass SendMessage extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showDetail: false,\r\n      monthSalesTaskDetailList: [],\r\n      title: '',\r\n      addColumns:[\r\n      { title: '总销售数', width: 80, dataIndex: 'totalSaleNum' },\r\n      { title: '任务完成率', width: 80, dataIndex: 'totalRatio' },\r\n    ]\r\n    }\r\n\r\n/*    //得到传参，根据传参取后台数据，到页面展示\r\n    //type 类型标识\r\n    const type = this.props.match.params.type;\r\n    //对应的名称\r\n    const name = this.props.match.params.name;\r\n    //是不是只含有task任务数\r\n    const time = this.props.match.params.time;*/\r\n    const {type, name, time} = this.props.match.params;\r\n\r\n    console.log(type, name);\r\n\r\n    const { dispatch } = this.props;\r\n    dispatch({\r\n      type: 'sendMessage/fetchQuerySendInfo',\r\n      payload: {\r\n        type: type,\r\n        name: name,\r\n        month: time\r\n      }\r\n    })\r\n  }\r\n\r\n  setTitle = () => {\r\n/*    let myDate = new Date();\r\n    let time = myDate.getFullYear() + '年' + myDate.getMonth();*/\r\n    const time = this.props.match.params.time;\r\n    return \"我的\" + time + \"的销售任务报表\";\r\n  }\r\n\r\n  toDetail = (record, text) => {\r\n    //if(id){\r\n    this.setState({ showDetail: true, monthSalesTaskDetailList: record.monthSalesTaskDetailList, title: text });\r\n\r\n    //}\r\n  }\r\n\r\n  goBack = () => {\r\n    this.setState({ showDetail: false });\r\n  }\r\n\r\n  render() {\r\n    /*const dataSource = [\r\n      { manager: '华南', totalTaskNum: 100, totalSaleNum: 80, totalRatio: '80%' }\r\n    ]*/\r\n    const { sendMessage } = this.props;\r\n    const dataSource = sendMessage.data;\r\n\r\n    let columns = [{\r\n        title: '任务责任人',\r\n        width: 100,\r\n        dataIndex: 'manager',\r\n        render: (text, record) => {\r\n          return (\r\n            <span><a href=\"javascript:;\" onClick={() => this.toDetail(record,text)}>{text}</a></span>\r\n          )\r\n        }\r\n      },\r\n      { title: '总任务数', width: 80, dataIndex: 'totalTaskNum' },\r\n/*      { title: '总销售数', width: 80, dataIndex: 'totalSaleNum' },*/\r\n/*      { title: '任务完成率', width: 80, dataIndex: 'totalRatio' },*/\r\n    ];\r\n\r\n    const taskType = this.props.match.params.taskType;\r\n\r\n/* taskType === 0  显示完成度   taskType === 1  不显示完成度*/\r\n    if(taskType === '0'){\r\n      columns = columns.concat(this.state.addColumns);\r\n    }\r\n\r\n    let view = '';\r\n    if (!this.state.showDetail) {\r\n      view = (\r\n        <Table style={{textAlign: 'center'}}\r\n        columns={columns}\r\n        dataSource={dataSource}\r\n        bordered\r\n        title={this.setTitle}\r\n        pagination={false}\r\n       />\r\n      )\r\n    } else {\r\n      view = (\r\n        <Detail goBack={this.goBack} dataSource={this.state.monthSalesTaskDetailList} title={this.state.title} taskType={taskType}\r\n       />\r\n      )\r\n    }\r\n\r\n    return (\r\n      <Card >\r\n      {view}\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SendMessage\r\n"],"sourceRoot":""}